---
import Mayam from '../../assets/mapache 2.png';
import Button from '../Button.astro';
import { actions } from "astro:actions";
const { SaveFormAction } = actions;
---


<main class="px-20 max-w-full min-w-0 m-8 p-8 text-sm">
    <section id="aliados" class="w-full px-4 space-y-8 gap-8">
    <h1 class="text-4xl leading-[54px] font-bold text-foreground/70 mb-2 p-2 text-center">
        Aliados Estrategicos
    </h1>
    <div class="pt-4 m-4">
        <div class="w-[250px] h-[250px]">
            <img src={Mayam.src} alt="mayam">
        </div>
    </div>
        <section class="flex flex-wrap items-start justify-center gap-4 p-4 ">

    <div class="max-w-md  w-[350px]">
        <h2 class="font-medium text-[#AC8178] text-2xl">Contáctanos</h2>
        <h1 class="text-[46px] leading-[54px] text-foreground/60 mb-2 ">¡Incrementa la <strong class="text-black">experiencia</strong> de tus clientes!</h1>
    </div>
   
        <form method="POST" action={SaveFormAction} class=" h-[auto] w-[220px] ml-auto mr-auto m-2 space-y-4"  id="formulario">
    
    <label>Con quien tenemos el gusto</label>
        <input type="text" name="nombre" placeholder="Nombre Completo" required/>
    <label>Cargo empresarial</label>
        <input type="text" name="cargo" placeholder="Dueño de negocio" required/>
    <label>Correo electrónico</label>
        <input type="email" name="correo" placeholder="@" required/>
  
    <div>
        <label>Ingresa tus datos</label>
          <select name="servicios" class="text-foreground/70  text-[12px] w-full border-2 rounded-b p-1" >
              <option>Servicio Mapache</option>
              <option>Innovación Empresarial</option>
              <option>Diseño de Branding</option>
              <option>Workshops Mapache</option>
              <option>Quiero la prueba de usabilidad</option>
              <option>Quiero la radiografía financiera</option>
              <option>Quiero el diagnóstico de Marca</option>
          </select>
    </div>

    <div>
        <div class="space-y-1">
             <label class="">Comentarios</label>
            <textarea class="p-3" name="comentarios" placeholder="¿Cómo podemos ayudarte?"></textarea>
        </div>
    </div>
    
    <Button label="Enviar" />
    <p id="form-message" class="hidden mt-2 font-semibold"></p>
</form>
   
        </section>
    </section>
</main>


<style>
 

 input{
        border: 1px solid #ccc;  
        padding: 5px;
        border-radius: 5px;       
        width: 100%;
        font-size: 12px;
    }
    textarea{
       
        color: #000;
        width: 100%;
        height: 100px;
        border-radius: 6px;  
        border: 1px solid #ccc;  
        font-size: 12px;
        
    }
    label{
        color:#9b9898;

        font-size: 10px;
       
    }
    option{
        color: #9b9898;
       
        border-radius: 6px;       
    }
    select{
        border: 1px solid #ccc;
    }
</style>
<script>

    import { actions } from "astro:actions";
  const { SaveFormAction } = actions;

  const formElement = document.getElementById("formulario") as HTMLFormElement;
  const messageElement = document.getElementById("form-message") as HTMLFormElement;

  formElement?.addEventListener("submit", async (e) => {
    e.preventDefault();

    messageElement.style.display = "none";
    messageElement.textContent = "";

    const form = new FormData(formElement);

    const { data: response, error } = await SaveFormAction(form);

    if (error) {
      console.error("Error:", error);
      messageElement.style.display = "block";
      messageElement.className = "text-red-600 font-semibold mt-2";
      messageElement.textContent = "Ocurrió un error, intenta de nuevo.";
      return;
    }

    
    formElement.reset();
    messageElement.style.display = "block";
    messageElement.className = "text-green-600 font-semibold mt-2";
    messageElement.textContent = "Tus datos han sido registrados.";
  });

</script>