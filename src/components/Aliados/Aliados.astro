---
import { actions, } from 'astro:actions';
import Mayam from '../../assets/mapache 2.png';
const result = Astro.getActionResult(actions.createNewContacto);

 
---
<main class="px-20 max-w-full min-w-0 m-8 p-8 text-sm">
    <section id="aliados" class="w-full px-4 space-y-8 gap-4">
    <h1 class="text-4xl leading-[54px] font-bold text-foreground/70 mb-2 p-2 text-center">
        Aliados Estrategicos
    </h1>
    <div class="pt-4 m-4">
        <div class="w-[250px] h-[250px]">
            <img src={Mayam.src} alt="mayam">
        </div>
    </div>
    
        <section class="flex flex-wrap items-start justify-center gap-4 p-4 bg- ">

    <div class="max-w-md w-[350px] space-y-6 ">
        <h2 class="font-medium text-[#AC8178] text-2xl">Contáctanos</h2>
        <h1 class="text-[46px] leading-[54px] text-foreground/60 mb-2 sa ">¡Incrementa la <strong class="text-black">experiencia</strong> de tus clientes!</h1>
       
   
    </div>
   
        <form method="POST"   id="formulario" action={actions.createNewContacto}
        class=" h-[auto] w-[280px] ml-auto mr-auto m-2 space-y-8 items-center">
    
    <label for="username">Con quien tenemos el gusto</label>
    <input type="text" name="name" placeholder="Nombre Completo" required />
    <label for="cargo">Cargo empresarial</label>
    <input type="text" name="cargo" placeholder="Dueño de negocio"required/>
    <label for="email">Correo electrónico</label>
    <input type="email" name="email" placeholder="@" required/>
    <div>
        <label for="select">Ingresa tus datos</label>
          <select name="select" class="text-foreground/70  text-[12px] w-full border-2 rounded-b p-1" >
              <option>Servicio Mapache</option>
              <option>Innovación Empresarial</option>
              <option>Diseño de Branding</option>
              <option>Workshops Mapache</option>
              <option>Quiero la prueba de usabilidad</option>
              <option>Quiero la radiografía financiera</option>
              <option>Quiero el diagnóstico de Marca</option>
          </select>
    </div>

    <div>
        <div class="space-y-1">
             <label class="">Comentarios</label>
            <textarea class="p-3" name="comentarios" placeholder="¿Cómo podemos ayudarte?"></textarea>
        </div>
    </div>
    
   <button form="formulario"
	type="submit" 
	class=`flex items-center gap-2 w-auto max-w-[480px] rounded-2xl font-medium py-1 cursor-pointer px-4 hover:opacity-80 bg-primary text-foreground`>
	Contactar con el equipo
</button>
   
</form>

<div id="mensaje" class=" text-center text-sm mt-4 p-4 w-full rounded-b border-2 border-muted/70 "></div>
   
        </section>
    </section>
</main>


<style>
 

 input{
        border: 1px solid #ccc;  
        padding: 5px;
        border-radius: 5px;       
        width: 100%;
        font-size: 12px;
    }
    textarea{
       
        color: #000;
        width: 100%;
        height: 100px;
        border-radius: 6px;  
        border: 1px solid #ccc;  
        font-size: 12px;
        
    }
    label{
        color:#9b9898;

        font-size: 10px;
       
    }
    option{
        color: #9b9898;
       
        border-radius: 6px;       
    }
    select{
        border: 1px solid #ccc;
    }
</style>
<script>
import { actions } from "astro:actions";

     const form = document.getElementById('formulario') as HTMLFormElement;
     const mensaje = document.getElementById("mensaje");

    form?.addEventListener ("submit", async (ev) => {
       ev.preventDefault();
       const formData = new FormData(form);
       
     const { data, error } = await actions.createNewContacto(formData);
    
    console.log(data);
    if (mensaje) {
      mensaje.innerHTML = `✅ ¡Gracias ${formData.get("name")} ! Hemos recibido tu información.`;
    }

    form.reset();
    });

</script>